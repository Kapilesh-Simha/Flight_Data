# ---- Auto-hide Sidebar Script ----
st.markdown("""
    <style>
        /* Sidebar transition and visibility settings */
        [data-testid="stSidebar"] {
            transition: all 0.6s ease-in-out;
        }
        .sidebar-hidden [data-testid="stSidebar"] {
            margin-left: -330px; /* hides the sidebar */
        }
        .sidebar-hidden [data-testid="stSidebarNav"] {
            opacity: 0;
        }
    </style>

    <script>
        let sidebarTimer;
        let root = window.parent.document.querySelector('[data-testid="stAppViewContainer"]').parentElement;

        function hideSidebar() {
            if (!root.classList.contains('sidebar-hidden')) {
                root.classList.add('sidebar-hidden');
            }
        }

        function showSidebar() {
            if (root.classList.contains('sidebar-hidden')) {
                root.classList.remove('sidebar-hidden');
            }
            clearTimeout(sidebarTimer);
            sidebarTimer = setTimeout(hideSidebar, 5000); // 5 seconds of inactivity
        }

        // Reset timer on any mouse movement
        window.addEventListener('mousemove', showSidebar);
        window.addEventListener('mousedown', showSidebar);
        window.addEventListener('scroll', showSidebar);
        showSidebar();  // start timer immediately
    </script>
""", unsafe_allow_html=True)
