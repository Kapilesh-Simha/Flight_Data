stage('Launch Streamlit Dashboard') {
    steps {
        echo "ðŸš€ Launching Streamlit dashboard (detached mode)..."
        bat """
        echo Killing any previous Streamlit processes...
        taskkill /F /IM streamlit.exe /T >nul 2>&1

        echo Starting Streamlit as a detached background process...
        powershell -Command "Start-Process '%PYTHON%' '-m streamlit run \"%PROJECT_DIR%/src/live_app.py\" --server.port=%STREAMLIT_PORT% --server.headless true' -WindowStyle Minimized"

        echo Waiting for Streamlit to initialize...
        ping -n 8 127.0.0.1 >nul

        echo âœ… Streamlit should now be running on http://localhost:%STREAMLIT_PORT%
        start "" "http://localhost:%STREAMLIT_PORT%"
        """
    }
}